接警中心更新记录


1.3.23.9020 2016-5-21 17:41:00
修复GPRS主机断线后主机按钮中气泡提示的信号强度未修改为0的bug


1.3.22.9009 2016-5-18 17:46:05
1.接警中心守护程序检测更新时若解析域名失败不提示
2.百度地图内红色标记添加信息窗口，显示主机的联系人、地址、电话等信息


1.3.21.8982 2016-5-17 23:52:57
1.主机断线时用户远程控制则提示操作失败
2.修复播放视频时出现“45：无法获取操作码”的问题
3.稳定性更新
4.修复自动更新功能无法执行的问题


1.3.20.8951 2016-5-16 11:39:16
1.程序启动时检测更新
2.重构中，未大量测试
    a.重写了日志类
    b.日期时间相关操作使用std::chrono更新，
    与日期时间相关操作须测试

    
1.3.19.8912 2016-5-12 15:37:15
若对讲操作失败显示错误码


1.3.18.8911 2016-5-12 09:24:38
修复百度地图不显示错误


1.3.17.8904 2016-5-11 15:42:41
软件启动时自动刷新视频用户设备列表并更新camera_id


1.3.16.8898 2016-5-11 09:56:07
1.修复新机子上没有了硬件校验的问题
2.关闭软件时有播放异常不再提示
3.隐藏音量滑块
4.当设置为以域名连接时，若解析域名失败则提示并停止


1.3.15.8883 2016-5-9 22:46:04
修复视频多画面问题


1.3.14.8813 2016-5-9 11:37:55
1.修复对网络模块类型主机进行“添加分机并写入主机”操作忘记对该分机添加“客户信息”导致崩溃的bug
2.视频多画面测试版
3.语音对讲测试版


1.3.13.8621 2016-5-7 16:11:41
1.解析域名方法修改，使用boost::asio+异常处理方式，防止卡死
2.在“接警中心信息”面板内修改单个服务器的IP、端口时，
只重启对该服务器的链接，不重启没修过的另一个服务器链接


1.3.12.8607 2016-5-7 14:52:30
1.重构，将所有配置文件由xml修改为json
2.改进提醒机制，每次收到服务器心跳回应或直连型主机的心跳后立即检查提醒时间与服务时间
3.过滤“阻止非法主机”的历史记录显示，最快6秒1条


1.3.11.8553 2016-5-6 10:14:22
修复对主机的解除禁用操作不能保存的bug


1.3.10.8548 2016-5-6 01:25:54
1.当用户在“接警中心信息”内修改了服务器IP地址或端口号，
设置该服务器下次以IP端口方式访问（不再是域名方式）
2.当服务器IP设置为“0.0.0.0”表示不使用该服务器时，不再检查其端口号
3.主机管理界面内右击分组项的弹出菜单中添加“创建主机”条目，创建的主机默认使用该分组
4.主机服务期限与提醒功能增强：
主机用户类型分为：家庭、商铺、单位，可自定义更多类型
主机服务期限金额：应收、已付、欠费
升级安装时默认用户类型为家庭，应收、已付金额为0
在主机管理界面内可以修改单个主机的用户类型、金额、服务期限、提醒时间
在服务期限管理界面内可以批量修改多个主机的类型、金额、服务期限、提醒时间
当主机不在线时不提醒，主机上线后检查提醒时间、服务期限，若到期则在主界面弹窗提醒


1.3.9.8387 2016-5-3 23:05:15
服务期限管理界面内可以编辑主机信息了！


1.3.8.8326 2016-5-2 17:18:42
1.中转服务器IP地址填写为“0.0.0.0”则不连接该服务器
2.掩盖接警中心与中转服务器的断开，
断开后1分钟之内若重连成功则不显示任何信息。
若超过1分钟仍然没有连接成功，则显示“断开连接”。


1.3.7.8273 2016-5-2 11:46:28
1.卸载后重装的接警中心默认配置的中转服务器2的域名修改为hb3344.com
2.切换分组、开启“主机管理”不再清空已显示的主机按钮，加快响应速度


1.3.6.8252 2016-5-1 19:18:09
1.修复分组和主机无法移动至新创建的非一级分组的bug
2.创建主机选择分组时也采用多级菜单的方式
3.分组界面中，“所有主机”项可使用“以XX方式对主机排序”的功能
所有分组项可使用“过滤显示XX类型的主机”的功能
	a.排序依据：ID，名称，上线/下线，布防/撤防，报警/无报警
	b.过滤选项:全部，上线，下线，布防，撤防，报警
注：排序为全局生效，过滤显示仅对当前操作的分组生效。
4.安定宝ID默认为6位
5.分组项前显示分组ID，以对相同名称的分组进行区分
6.主机管理界面内的分组项添加主机数量显示


1.3.5.8122 2016-4-29 15:35:42
1.视频用户管理界面内，双击设备项可以播放视频
2.关闭接警中心时若有视频正在播放，确保正常关闭视频并输出“视频停止”的历史记录
3.历史记录界面内报警、异常信息的项，双击可以查看百度地图；
视频相关的项，双击可以播放视频


1.3.4.8105 2016-4-29 14:24:19
修复上个版本的bug——每次播放视频都要输入验证码


1.3.3.8095 2016-4-29 10:13:41
更新萤石相关功能，在新PC上运行接警中心时要求输入短信验证码进行安全性验证
以修复有些新机子必须先运行萤石工作室后接警中心才能播放视频的bug


1.3.2.8091 2016-4-28 18:35:40
1.修复当主机状态改变时分机界面被销毁的bug
2.修复删除分机时未能删除与分防区绑定的视频信息的bug
3.播放视频可设置默认码率，对所有视频设备有效
4.修复创建分机时未保存服务期限，导致接警中心重启后服务期限被重置的bug
5.修复当打开主机管理界面创建主机成功之前收到中转来的05 00命令字时，
新创建的主机图标为掉线，但是能反应状态变化的bug


1.3.1.8052 2016-4-27 22:36:48
添加英文版支持


1.3.0.7995 2016-4-25 13:51:54
检测到与服务器断开连接后立即显示掉线，
但不立即重连而是等待3分钟之后再重连


1.2.110.7982 2016-4-25 11:56:17
修复当接警中心与服务器真正断开连接后接警中心永远不掉线的bug


1.2.109.7960 2016-4-23 13:25:30
针对中转通道，若发送数据失败或接收数据失败时不再主动关闭，
必须等到3分钟到了再关闭连接并重连。


1.2.108.7958 2016-4-22 17:42:09
添加几个海康视频播放错误代码的解释


1.2.107.7956 2016-4-22 2016-4-22 17:02:45
1.修复主机内左侧历史记录有时不是最新的bug
2.主窗口与主机界面调整大小，不再掩盖任务栏


1.2.106.7937 2016-4-22 14:34:49
1.修复视频用户管理界面内删除用户或设备后按钮被禁用的bug
2.加固主机按钮，试图修复白屏


1.2.105.7928 2016-4-21 18:29:16
当收到主机类型时刷新主机按钮图标


1.2.104.7924 2016-4-21 17:32:38
当工程主机删除所有分机后，删除对应主机按钮的第三个图标


1.2.103.7922 2016-4-21 17:20:53
添加对视频播放错误码的解释


1.2.102.7920 2016-4-21 16:29:23
按钮在处理事件时判断是否需要闪烁


1.2.101.7915 2016-4-21 14:14:56
1.为“视频用户管理”界面响应“用户切换”事件
2.将一些事件码归为等级0，消除无缘故的绿色


1.2.100.7906 2016-4-20 23:38:24
1.修复有时退出编辑后主机页面内的标签栏有图片阴影未消除的bug
2.主机按钮的第三个图标按需创建，无分机的工程主机不再显示第三个图标
3.主机按钮上的图标的白色部分透明化
4.工程主机的分机按钮的在线/断线图标处的气泡提示不再显示通道，只显示在线/断线
5.修复当主机界面内当前显示的地图与探头编辑打开后第一个探头所在的地图不一致时，该地图上的所有探头都被选中的错误
6.优化图片显示类，修复每次显示都要重建图像资源的浪费问题
7.预设的报警等级对应的颜色修改，黄色增重，未定义事件的颜色从白色修改为绿色
8.重做新增的一些探头的图片，修复探头有边框的问题


1.2.99.7877 2016-4-20 14:56:46
1.修复工程主机图标
2.GPRS主机界面内禁用管理服务期限
3.主机按钮文字过长的话显示...
4.程序加固，防止主机图标变白


1.2.98.7868 2016-4-19 19:41:48
修复信号强度格数计算错误


1.2.97.7866 2016-4-19 19:24:05
主机管理界面内禁用下拉框的方式修改主机分组，
改为使用右键菜单，分组菜单可以分级选择


1.2.96.7826 2016-4-19 16:09:30
主机管理界面内，为主机项添加右键菜单，功能为：
删除主机
管理分机服务期限
移动到


1.2.95.7812 2016-4-19 15:14:37
1.更新萤石SDK
2.增大主机按钮中图标的大小


1.2.94.7808 2016-4-18 23:52:42
1.调整主机按钮中文字与图标的布局，文字在上方，图标缩小处于下方
2.为主机按钮中的图标添加气泡提示，并修改原有的一行气泡为多行
3.主机分组若有报警，则分组文字显示为红色
4.接警中心检测服务器超时的时间设置为3分钟


1.2.93.7735 2016-4-18 18:16:34
1.将2050型主机的防区报警历史记录与报警文字中的防区号修改为两位数
2.添加几个事件码
3.刷新设备列表时不再删除本地设备，用户可以手动删除


1.2.92.7715 2016-4-18 13:46:30
修复当在主机界面内打开历史记录窗口时其他分组主机报警导致卡死的bug


1.2.91.7693 2016-4-16 17:48:41
1.修复发行版录像文件不可播放的问题
2.将私有云IP配置修改为域名、IP皆可配置


1.2.90.7650 2016-4-14 17:48:42
1.视频播放时，截图快捷键为 Alt + C
2.修复水警探头的边框
3.修复当探头报警后关闭主机窗口并重新打开时，探头的蚂蚁线会移位的问题


1.2.89.7630 2016-4-12 14:26:20
1.主机分组按照分组名称进行排序
2.程序优化，试图解决点击按钮弹出的模态对话框跑到了背后的bug


1.2.88.7608 2016年4月11日20:38:25
试图修图不同分组的主机同时报警时频繁切换分组显示导致卡死的bug


1.2.87.7605 2016-4-11 20:30:58
修复删除视频用户后，已经绑定在地图上的摄像机图标未被随之删除的bug


1.2.86.7600 2016-4-11 16:11:16
软件启动时无条件重建探头库信息


1.2.85.7599 2016-4-11 15:17:33
修复直连协议索要防区最大字节数限制错误


1.2.84.7596 2016-4-10 15:26:17
修复主机信号强度算法错误


1.2.83.7595 2016-4-10 14:35:02
修复当软件失去焦点又重获焦点时，捕获焦点的主机按钮白屏问题


1.2.82.7592 2016-4-10 14:23:32
修复点击主机按钮后关闭主机窗口导致主机按钮白屏的问题


1.2.81.7585 2016-4-10 14:03:45
添加主机信号强度的日志输出


1.2.80.7583 2016-4-10 13:33:28
稳定性更新


1.2.79.7580 2016-4-9 20:30:01
按钮优化，防止白屏


1.2.78.7555 2016-4-9 19:26:41
主机按钮添加信号强度显示;直连型主机断线时信号强度为最低，在线时最高


1.2.77.7531 2016-4-9 15:05:56
1.修复进入设置时其他分组主机报警导致无法操作的bug
2.绑定摄像机图标时，只从与本主机防区绑定过的摄像机列表中选取。


1.2.76.7523 2016-4-9 14:18:11
设置防区后确保主机地图退出设置状态


1.2.75.7521 2016-4-9 13:56:21
设置防区时不缓存主机事件


1.2.74.7519 2016-4-8 18:23:19
1.直连型服务器的超时时间设置为2分钟
2.主机管理界面内设置主机坐标后刷新显示
3.设置防区时缓存报警事件，退出编辑后处理



1.2.73.7511 2016-4-7 14:17:50
1.退出“探头编辑”、“地图编辑”、“摄像头编辑”界面后统一将主机的所有地图设置为正常状态，
以修复有时报警后无法显示报警文字和闪烁蚂蚁线的bug
2.调整主机按钮容器中计算按钮位置的算法，
修复当最右边的按钮的右边界处于滚动条中间时无法正常显示的bug


1.2.72.7505 2016-4-5 14:32:03
优化，缩短播放视频的锁定时间，并恢复视频播放的弹窗


1.2.71.7502 2016-4-5 13:48:13
1.当视频播放失败时不再弹窗，而是写历史记录
2.断线音播放修改为异步播放


1.2.70.7486 2016-4-2 15:48:01
主机按钮UI更改后主动重绘，以修复当主机报警后断线时操作清除报警信息后，按钮文字未变为黑色的bug


1.2.69.7480 2016-3-28 15:03:50
性能优化


1.2.68.7473 2016-3-26 14:21:47
1.主界面内分组项添加当前分组下的正在报警的主机总数
例如：所有主机[1/2/3],表示“所有主机”分组共有3个主机，其中2个在线，1个报警。
2.主机显示根据安定宝ID进行排序


1.2.67.7458 2016-3-25 13:05:06
1.修复双服务器配置错误
2.修复视频播放界面内新增控件在全屏时未隐藏的问题


1.2.66.7449 2016-3-24 20:04:21
1.修复索要防区信息时不点击“停止”直接关闭窗口导致无法退出设置的问题
2.修复索要防区后重建防区列表逻辑错误导致已有防区被清除的问题


1.2.64.7445 2016-3-24 19:12:38
1.当主机至少有一个通道仍然存在时，某个通道断开不显示掉线
2.添加主机时若安定宝ID错误则有提示


1.2.63.7434 2016-3-24 15:42:10
功能改进，当主机最新数据通道断开而其他通道存在时仍然可以索要防区信息


1.2.62.7429 2016-3-23 17:36:39
蚂蚁线错位的问题已修复


1.2.61.7428 2016-3-23 17:15:07
1.稳定性更新
2.更改报警文字刷新逻辑，目前为最新的文字永远处于最上方


1.2.60.7404 2016-3-22 21:10:37
1.修复当防区报警后删除该防区则无法清除该防区的报警文字的bug
2.索要防区信息时，不再先删除所有防区再以索要结果重建所有防区，
而是与索要结果比对，存在则更新，不存在则删除，新增则随之新增，
以解决索要防区后导致原有的已绑定探头全部被删除的问题。


1.2.59.7397 2016-3-22 13:54:52
修复摄像机图标索引


1.2.58.7388 2016-3-19 16:58:31
发行版收到主机发来的DUH后不处理，调试版将写历史记录“非法操作”。


1.2.57.7385 2016-3-19 15:01:32
绑定萤石账户到私有云时输入短信验证码的输入框标题修改为“请输入手机短信验证码”


1.2.56.7383 2016-3-18 17:25:04
1.视频界面内的“保存配置”按钮按照用户权限进行禁用、启用
2.修复切换用户后“接警中心信息”界面自动弹出的问题


1.2.55.7374 2016-3-18 16:36:05
修复将所有ACK的序号都修改为了0000的bug


1.2.54.7371 2016-3-18 16:21:37
1.心跳回应的序号为0000
2.视频录像按照视频用户分文件夹存储


1.2.53.7355 2016-3-18 15:15:32
1.后台最长录像时间可设置
2.视频播放界面添加播放列表，双击项可以切换视频


1.2.52.7287 2016-3-17 16:55:15
1.取消上次更新的内容：不再自动布防
2.添加几个新版探头到探头库


1.2.51.7276 2016-3-17 13:26:20
配合改进型卧室主机2050版的索要防区信息功能，接警中心发送“退出设置”命令后自动布防。


1.2.50.7273 2016-3-15 10:02:39
1.安定宝协议中CRC为0时传输内容由0LLL修改为0000
2.更新“历史记录”、“视频截图”、“历史录像”等快捷方式


1.2.49.7271 2016-3-14 14:05:41
当有主机断线时不再循环播放断线音，改为只播放一次


1.2.48.7266 2016-3-12 17:45:57
不再使用NAK，若主机发送的数据出错则以DUH回应


1.2.47.7264 2016-3-11 17:03:05 
修复退出接警中心时若有报警信息则可能导致展示百度地图失败的bug


1.2.46.7261 2016-3-10 13:56:04
更新萤石私有云APPKey


1.2.46.7259 2016-3-10 10:55:31
当主机与接警中心的直连通道、中转通道都存在时，给主机发送远程控制优先走直连


1.2.45.7256 2016-3-10 09:33:17
修改索要防区前删除已有防区的时机


1.2.44.7254 2016-03-09 15:23:30
修复对改进型主机索要完成后忘记删除主机中已不存在的防区的bug


1.2.43.7252 2016-3-8 12:50:12
1.修复添加视频用户时有时无法提交短信验证码的问题
2.修复因配合改进型卧室主机2050版的中转方式1704索要导致无法对其远程控制的bug


1.2.42.7239 2016-3-7 13:38:56
修复因配合改进型卧室主机2050版的直连方式1704索要导致网络模块类型的1704索要功能不能使用的bug


1.2.41.7229 2016-3-5 17:46:03
针对改进型卧室主机2050版的直连方式索要防区信息完成


1.2.40.7203 2016-3-4 17:52:36
1.区分主机类型完成
2.针对改进型卧室主机2050版的中转方式索要防区信息完成


1.2.39.7063 2016-3-2 17:08:14
主机未设置百度地图坐标点或主机与接警中心处于同一位置时禁止导航功能


1.2.38.7057 2016-3-2 14:34:37
修复切换用户bug


1.2.37.7053 2016-3-2 12:35:01
1.修复点击“用户管理”界面时可直接添加用户的bug
2.主机管理界面内，右键单击“所有”主机分组项并操作“管理服务期限”时，显示所有主机
3.已经将所有用户数据文件归为程序安装路径下的"data"目录中，备份时只需要拷贝“data”目录即可
4.更改中转模式接警中心中对主机的存储方式，以便存储连接号大于10000的主机状态


1.2.36.7039 2016-3-1 16:12:04
更新短信模块接收格式，支持最新的单条短信多条信息功能


1.2.35.7035 2016-2-29 17:21:02
修复索要单个防区发送过快被“6秒内重复数据不处理”过滤掉而导致的一直在索要的bug


1.2.34.7032 2016-2-29 14:31:55
修复闰年2月29日问题


1.2.32.7025 2016-2-29 13:59:41
添加对命令字07 03的处理，显示对话框“已经有相同帐号的接警中心连上了中转服务器，\r\n请使用其他接警中心帐号或停止其他相同帐号的接警中心。\r\n程序将在您点击"确定"后退出。”
后退出程序。


1.2.31.7007 2016-2-29 09:47:00
修复闰年2月29日无法添加主机的问题


1.2.30.7005 2016-2-27 19:54:07
修复有时播放视频时程序退出的bug


1.2.29.7000 2016-2-27 14:37:47
修复添加地图后有时会出现阴影的bug


1.2.28.6995 2016-2-25 16:25:50
增加对事件码1711（手机用户消警）的处理


1.2.27.6985 2016-2-24 16:36:23
修复接警中心有时会狂发远程控制的bug


1.2.26.6982 2016-2-24 15:39:32
修复直连型主机断线后再次上线时图标未随之变化为在线图标的bug


1.2.25.6973 2016-2-23 12:20:43
1.在主界面内右键分组项执行“清除报警信息”后，停止播放报警音。
2.主机管理界面内不再显示安定宝ID的十六进制格式


1.2.23.6950 2016-2-17 15:12:33
修复“主机管理”中添加主机时“确定”按钮有时不可用的bug


1.2.22.6939 2016-2-4 15:23:39
1.修复重复锁bug
2.优化通过中转过来的命令字处理机制


1.2.21.6913 2016-1-29 15:21:35
1.修改历史记录上限为10000条，超过则自动导出Excel，以避免当活动频繁时有可能写超过65536条记录到Excel。
2.修复同一个安定宝ID的主机重复上线时导致崩溃的bug
3.修复更新CRITICAL_SECTION为std::mutex后导致重复锁的bug


1.2.20.6885 2016-1-28 15:00:15
修复“接警中心信息”对话框中两个中转服务器IP地址只能输2位数字的bug


1.2.19.6880 2016-1-26 16:47:16
1.处理05 00命令字
2.给主机的事件回应ACK命令字中接警中心帐号统一由本地生成


1.2.18.6870 2016-1-25 16:23:27
重构所有CRITICAL_SECTION为std::mutex，测试通过


1.2.17.6859 2016-1-25 15:24:33
修复当触警主机过多时在主界面分组管理内右击分组项操作“清除报警信息”速度过慢的现象


1.2.16.6853 2016-1-24 19:34:48
修复xp兼容性


1.2.15.6850 2016-1-23 16:38:19
1.修复分机防区不可编辑的bug
2.修复发送的xdata长度错误
3.修改历史记录类型“主机上下线”为“主机状态”
4.实现02 06 短信模式的处理，当主机处于短信模式时若用户操作远控则弹窗提示


1.2.14.6835 2016-1-20 10:45:22
修复有时点击“主机管理”则程序崩溃的bug


1.2.13.6831 2016-1-20 10:06:34
1.开放2号中转服务器
2.修改标准协议中安定宝ID为大写字母
3.0d 01命令字中安定宝ID改为根据conn_id从缓存中取值


1.2.12.6820 2016-1-18 13:51:04
接警中心与中转服务器的心跳间隔修改为5秒钟


1.2.11.6813 2016-1-16 18:44:38
接警中心3次心跳时间内收不到中转服务器发来的数据则断开重连


1.2.10.6808 2016-1-16 14:49:13
修复死循环错误


1.2.9.6798 2016-1-16 14:19:47
修复两个导致崩溃的bug


1.2.8.6789 2016-1-16 09:41:19
修复06 00 命令字中接警中心帐号格式错误


1.2.7.6784 2016-1-15 21:04:11
1.新创建分机的服务期限默认为1年后
2.私有协议中06 00命令字添加接警中心帐号
3.与中转服务器断开连接后重置接警中心连接号


1.2.6.6763 2016-1-14 20:53:20
1.修复分防区数据绑定错误的bug
2.删除未捕获的异常
3.修复索要防区时进度条对话框有时不弹出的问题


1.2.5.6742 2016-1-13 15:32:33
修复设置摄像机图标对话框内选择摄像机后不能编辑的bug


1.2.4.6736 2016-1-13 09:42:30
修复更新后当网络数据错乱时不能正确处理的bug


1.2.3.6718 2016-1-8 22:05:58
1.“备用服务器”改为“二号中转服务器”
2.接警中心启动时选择网络模式：直连模式、中转模式、混合模式
3.中转服务器地址配置可以使用域名


1.2.2.6620 2016-1-8 09:39:41
1.修复不能删除接警中心帐号的bug
2.修改worker线程内LoadString为统一从全局AppResource取值，防止ui/worker冲突
3.为所有匿名namespace命名


1.2.1.6585 2016-1-7 16:41:25
修复有时中转服务器断开后接警中心不能重连之的bug


1.2.0.6571 2016-1-6 21:28:24
1.同时连接两个中转服务器，简单测试通过
2.服务器配置不再使用xml，改为使用json。


1.1.3.6529 2016-1-5 22:15:11
修复地图对象只能绑定一个监听者的bug。
复现方法：
主机触警，单击主机按钮打开主机界面，查看报警文字；
切换到“触警主机”标签栏，单击主机按钮再次打开主机界面，点击“清除报警信息”；
切换回主标签栏，单击主机按钮打开主机界面，此时界面上仍然有未清除的报警文字存在。
已修复。


1.1.2.6521 2016-1-4 22:20:35
重构，修改by value为by const reference


1.1.1.6489 2016-1-4 18:24:39
1.修复重构后分机历史记录主机界面未显示的bug
2.连接中转服务器成功、与中转服务器断开连接记录到数据库


1.1.1.6483 2016-1-4 18:02:58
以stl重构observer


1.1.0.6462 2016-01-04 10:16:33
内存管理使用smart_ptr，重构完成


1.0.30.6444 2016-01-04 00:37:12
只有带网络模块的主机拥有“半布防”功能，其他类型的主机已禁用“半布防“


1.0.30.6442 2016-01-04 00:32:35
重构中，未大量测试


1.0.29.6394 2016-1-3 16:40:54
修复探头编辑相关功能


1.0.28.6376 2016-1-3 09:45:57
使用smart_ptr管理内存，重构中，未大量测试


1.0.27.6224 2015-12-31 16:01:55
修复进制错误


1.0.27.6214 2015-12-31 15:09:10
修复更新后安定宝协议中主机AdemcoID以10进制表示的bug


1.0.26.6210 2015-12-31 11:50:34
修改接警中心短信号码后重启网络服务


1.0.24.6170 2015-12-30 16:40:24
安定宝协议解析使用std::vector以消除显示delete


1.0.23.6140 2015-12-30 14:25:32
分机按钮删除“半布防”右键菜单


1.0.22.6068 2015-12-29 17:03:54
1.修复半布防图标错误
2.添加对主机的半布防右键菜单
3.修复添加视频用户时需要填写验证码则对话框无法弹出的隐患


1.0.21.6053 2015-12-29 14:44:51
试图解决程序启动时载入萤石sdk过晚导致无法明确以指定值退出进程的错误


1.0.20.6042 2015-12-29 10:15:49
1.修复分机数据库格式忘记更改导致启动失败的bug
2.修复登录窗体taborder。


1.0.19.6028 2015-12-28 15:31:30
添加视频用户时添加了进度条提示


1.0.18.6010 2015-12-28 10:05:30
删除了安装包中关于python的部分，精简安装包大小


1.0.17.5995 2015-12-27 18:23:32
接警中心和主机的初始位置默认为108.953,34.2778，缩放级别为5，可以看到中国版图


1.0.16.5991 2015-12-27 18:17:20
删除了百度地图相关的自动定位功能


1.0.15.5985 2015-12-27 17:42:38
1.添加半布防事件的处理、添加半布防图标
2.编写了守护进程，防止接警中心启动失败
3.修改了数据库格式，不能兼容旧版本的备份


1.0.14.5958 2015-12-26 17:08:47
1.修复分段式（先标准、后私有）处理命令字的问题：
如果接收、处理完标准部分时恰好缓冲区满，导致缓冲区重构。
此时缓冲区保存的为私有命令字，而处理程序优先以标准协议解析命令字，当然出错。
2.修改与私有云服务器的通信超时时间，该时间有可能超过10秒，现为20秒。


1.0.13.5944 2015-12-26 10:23:14
1.修改配置文件格式，由xml格式修改为json格式
2.百度地图界面内缓存报警主机完成，
勾选“有报警时立即刷新”时不缓存，立即显示；
取消勾选“有报警时立即刷新”时将报警主机缓存
3.历史记录显示的时间统一修改为本地接收时间

1.0.12.5759 2015-12-15 22:52:38
修改半布防事件码，由1456修改为3456


1.0.11.5726 2015-12-8 10:21:00
更新萤石SDK


1.0.10.5714 2015-12-4 14:59:13
添加错误报告功能，程序异常崩溃时可自动收集必要信息并发送至服务器


1.0.9.5699 2015-12-2 15:51:15
添加在地图上显示摄像机图标的功能，点击图标可以预览视频


1.0.8.5342 2015-11-16 16:47:38
1.修复百度地图卡死现象，使用谷歌开源浏览器内核chomium embedded framework的编译版本libcef3.2171.1902_windows32
2.萤石云用户在网站添加硬盘录像机后，在接警中心软件点击”刷新设备列表“可载入其硬盘录像机的所有视频通道


1.0.6.5163 2015-10-31 17:20:12
修复截图功能


1.0.5.5132 2015-10-21 10:58:20
视频用户管理界面内，点击“刷新用户设备列表”后，以云端数据为准更新本地数据


1.0.5.5124 2015-10-20 17:29:30
1.主界面分组管理界面，右键单击分组项时，弹出菜单，可批量对该分组下的主机进行“清除报警信息”操作
2.对主机进行的“清除报警信息”操作时，若主机未报警，则操作无效


1.0.5.5106 2015-10-19 17:27:09
优化创建主机相关：
1.记录上次添加主机的分组，下次添加时优先显示这个分组
2.根据安定宝ID自动命名别名


1.0.5.5098 2015-10-19 16:59:06
更新一些视频相关的字符串格式


1.0.5.5084 2015-10-19 16:31:15
修复主机管理界面内选取坐标时在外部浏览器里打开了百度地图的bug


1.0.5.5081 2015-10-19 13:26:57
修复停止播放后仍有videoData回调导致内存访问出错的bug


1.0.5.4942 2015-10-15 17:38:07
1.历史记录使用buffer模式，解决了快速插入历史记录时有可能导致的死锁现象
2.视频播放器界面的标题显示当前视频设备的简略信息


1.0.5.4922 2015-10-15 16:40:26
历史记录界面内类型为“报警信息”与“异常信息”的历史记录可以右键打开该主机的百度地图


1.0.5.4912 2015-10-15 13:22:23
1.修复百度地图切换过快时导致程序卡死的bug
2.更新短信接警的命令字格式以兼容钱方面GPRS主机
3.防区设置内绑定视频设备信息处显示简略的设备信息


1.0.5.4886 2015-10-15 08:38:17
修复主机管理界面内移动某含有上线主机的分组到其他分组时，未更新新分组上线数量的bug


1.0.5.4869 2015-10-14 13:02:27
1.修复主机界面内打开历史记录时看不到该主机的分机的历史记录的bug
2.主机或分机界面内打开历史记录时不再分页，全部历史记录显示在1页内
3.防区编辑界面内将防区与视频绑定后可以预览视频


1.0.5.4847 2015-10-13 17:13:26
修复小bug若干


1.0.5.4767 2015-10-10 09:23:46
修复移动上线主机到某分组后主界面分组显示上线数量未更新的bug


1.0.5.4760 2015-10-7 17:26:56
保存主机百度地图的缩放级别


1.0.4.4752 2015-10-7 16:30:00
1.每个设备可以绑定到多个防区，每个防区只能绑定一个设备
2.同步视频用户管理界面与防区设置界面的设备信息


1.0.3.4726 2015-10-6 16:46:07
每个设备只能绑定一个防区


1.0.3.4722 2015-10-6 16:23:19
修复“NULL”被替换为“nullptr”的bug


1.0.2.4715 2015-10-6 15:38:11
重新分配快捷键：
ctrl+上、下、左、右为编辑探头时移动探头
alt+上、下、左、右为播放视频时云台控制


1.0.1.4711 2015-10-6 15:24:49
1.修复由“修复视频全屏bug”引入的视频普屏时不能正常记录上次坐标的bug
2.分机报警时显示分机地图，不显示其主机地图
3.修复防区报警并播放视频后界面无响应的bug
4.修复分机（包括分防区）报警时导致的内存泄露


1.0.0.4657 2015年10月3日15:13:42
1.主界面主机分组显示分组内上线主机数量
2.修复视频全屏bug


1.0.0.4639 2015年10月2日21:42:59 
1.萤石视频设备相关功能，可播放、云台控制、录像等，详情见《接警中心视频相关功能使用说明》
2.重新设计、实现服务器模块，使用动态内存加快程序退出速度
3.其他微调


0.0.2.3679 2015年8月22日 17:45:18
修复空#acct错误


0.0.2.3675 2015年8月22日 17:15:45
1.修复主机下线时程序退出的bug
2.修复收到极端错误数据的情况下程序退出的bug
3.其他微调


0.0.2.3664 2015年8月22日 10:52:47
1.接警中心上线命令中标准部分帐号前补上缺失的#，值为000000
2.接警中心远控命令中标准部分帐号前补上缺失的#，值为主机帐号
3.接警中心给主机的回应，标准部分帐号前补上缺失的#，值为主机帐号


0.0.2.3658
1.等待连接上中转服务器后再开始发送心跳
2.上线的ID改为"HENG-BO"
3.补齐上线命令中#acct的#

0.0.2.3649 2015年8月21日 15:00:38
主机离线时释放其用于私有命令字的参数，防止远控混乱

0.0.2.3648 2015年8月21日 14:51:43
修复主机未上线时通过中转服务器发送命令字时崩溃的bug


0.0.2.3641 2015年8月20日 18:18:39
修改私有部分连接号错误：接警中心主动发送给主机的命令填写主机的连接号


0.0.2.3638 2015年8月19日 15:58:20
私有协议中标准部分的#acct修改为主机帐号


0.0.2.3637 2015年8月19日 14:08:57
更新“创建主机”界面内安定宝ID的显示方式


0.0.2.3628 2015年8月18日 22:24:03 
收到gprs主机第一条0d 00命令时存储私有部分的一些参数，供发送时使用


0.0.2.3624 2015年8月18日 17:58:42
分配安定宝ID时同时显示10进制与16进制值


0.0.2.3617 2015年8月18日 15:42:24
安定宝ID范围为0~9999，显示4位数字，传输时使用6位ASCII字符表示16进制数字。


0.0.2.3598 2015年8月17日 17:48:35
修改所有安定宝ID为6位数字


0.0.2.3589 2015年8月14日 22:45:34
1.标准协议修改：data段前的#acct修改为安定宝ID
2.短信接收报警信息完成


0.0.2.3563 2015年8月12日 18:47:41
修改主机按钮图标表现方式


0.0.2.3537
1.管理员可以修改接警中心帐号
2.联调开始，可以模拟通信
3.通过中转服务器给主机的命令字中标准协议的#acct部分修改为主机的帐号


0.0.2.3520 2015年8月8日 21:06:42
修改接警中心帐号：从自动生成MD5修改为使用短信模块的手机号码


0.0.2.3507 2015年8月8日 14:38:47
1.修复接警中心刚启动后点击百度地图界面的“自动定位”时崩溃的bug。
2.主机的“设置防区信息”界面内显示该防区的“物理地址”。


0.0.2.3500 2015年8月1日 15:47:13
1.修复分机不报告状态变化的bug。
2.主机可设置是否在报警时自动显示百度地图，在百度地图界面内设置。


0.0.2.3483 2015年7月29日 17:02:13
修复手动对码时添加分机导致未知事件0的bug。
手动对码时检查该物理地址是否已经使用，是则不能添加。


0.0.2.3446 2015年7月22日 15:59:28
完成了双屏显示接警中心主界面与百度地图的功能：
a.记录百度地图界面的位置、大小、是否最小化等，下次启动时载入
b.主机或分机报警时自动调出该主机或分机的百度地图并居中缩放


0.0.2.3414 2015年7月21日 16:24:57
快捷键Ctrl + M 相当于静音一次


0.0.2.3385 2015年7月21日 14:39:10
发送短信时前缀安定宝协议data段功能完成。


0.0.2.3381 2015年7月21日 11:26:04
1.修复发送短信后导致的内存泄漏
2.点击“静音一次”后：
	a.当仅有报警没有断线时，停止播放报警音
	b.当仅有断线没有报警时，停止播放断线音
	c.当有报警且有断线时，第一次点击消除报警音，第二次点击消除断线音


0.0.2.3367 2015年7月20日 14:28:33
1.不再使用从网络模块收到的时间戳为历史记录的时间，而是使用接收时间。
2.手动对码功能完成。在主机界面内、设置防区信息、手动写入对码信息。


0.0.2.3348 2015年7月18日 14:39:46
1.当修改了分机的信息（别名、联系人、地址、电话、备用电话等）后，立即更新分机界面的标题栏。
2.修复查询单个分机总是失败的bug


0.0.2.3304 2015年7月15日 16:11:22
历史记录相关：
最大记录60000条，每新增100条记录则检查一次是否到了最大数量，到达最大数量则自动导出，
自动导出的Excel文件保存在程序安装路径下的history文件夹中，
桌面上有该文件夹的快捷方式，名称为“历史记录”


0.0.2.3281 2015年7月15日 11:20:11
1.将所有配置文件与数据库文件移动到安装目录下的config文件夹，因此手动备份时只需要拷贝config与maps两个文件夹就可以了
2.短信模块功能开发基本完成，详见《接警中心短信相关功能使用说明.docx》


0.0.2.3225 2015年7月13日 15:22:13
1.删除主机后立即踢掉该链接（如果在线的话）
2.完善用户管理权限：
操作员账户权限：布撤防、查询分机、清除报警信息、静音一次、导出部分历史记录、打印历史记录、查看百度地图等
管理员账户权限：在拥有了操作员账户管理权限之外，增加主机管理、分机管理、防区管理、地图管理、探头管理、百度地图管理、恢复主机数据等权限
超级管理员账户权限：拥有所有权限，并可以管理账户，例如添加、删除管理员账户或操作员账户，修改账户密码等操作。


0.0.2.3197 2015年7月11日 17:26:13
1.修复打开分机窗口并当删除该分机后退出编辑模式时导致空指针引用导致程序崩溃的bug
2.当索要防区无回应时，重发


0.0.2.3178 2015年7月9日 22:08:18
1.区分远程事件的时间戳与接收时间，前者用来显示，后者用来过滤6秒内重复事件。
以修复当时间戳与本地时间不一致时导致的段时间内多条事件未过滤的问题。
2.设置debug版的查询分机超时时间为20秒
3.当导出所有历史记录后清除主机与分机界面内的历史记录
4.当导出所有历史记录后，重置ID为以1开始累增
4.加宽历史记录界面内“条/页”下拉框宽度
5.修复发行版的远控时死锁问题


0.0.2.3156
1.每隔16小时检查一次是否有分机超过16小时无联系
2.修复发送数据过慢的问题


0.0.2.3081 2015年6月29日 16:53:20
1.修复恢复主机数据时仅有有线防区导致崩溃的bug
2.将一些调试用的参数修改为发行版的参数（分机超时时间、历史记录提示频率等）


0.0.2.3076 2015年6月29日 15:30:51
自动查询失联分机相关：
检测到有失联分机时不再由用户选择“立即查询”或“1小时后提醒”，而是直接弹出查询分机界面
查询分机界面内不再倒数10秒后再开始查询，而是直接开始查询


0.0.2.3073 2015年6月25日 21:53:25
1.修复删除探头bug
2.探头编辑界面不再提供“防区编辑”与“地图编辑”的快捷方式


0.0.2.3048 2015年6月24日 14:35:37
1.修复xp兼容性
2.自动查询的超时时间为16小时
3.更新了布防、撤防和断线三个图标，以便区分


0.0.2.3029
1.用户权限完善，操作员禁止删除地图与探头
2.代码加固，消除主机按钮重叠bug、离线按钮文字非红色bug等
3.主机管理界面内完善按钮的禁用、启用


0.0.2.3017
1.用户权限完善
2.一些小更新
3.block mode


0.0.2.2956 2015年6月11日 13:42:29
所有离线主机都重新上线后不再播放离线提示音


0.0.2.2936 2015年6月8日 16:05:49
1.基本可以确定通信问题是由网络模块的MAC地址相同引起的
2.recv <= 0 则踢掉
3.修复主机服务期限管理界面内，选中条数变化时，下方显示的数字不一致的bug
4.索要防区信息重发等待时间缩短


0.0.2.2924 2015年6月6日 18:19:16
1.支持自动索要所有防区信息
2.历史记录对话框禁用最小化按钮


0.0.2.2900
1.程序记录分机状态
2.主机断线则将下属所有分机都置为断线状态
3.主机上线则根据记录的分机状态恢复分机图标


0.0.2.2887
1.主机管理界面内右击分组项即可对该分组的主机进行服务期限管理
2.服务期限管理界面内列表可排序
3.可打印选中


0.0.2.2869
设置client socket send/recv timeout为10s


0.0.2.2868
1.导出服务期限记录到Excel完成
2.设置send/recv timeout为10s


0.0.2.2854
使用std::map来存储container的machinedlg，目的为：
1.加快相应速度
2.减少出错几率


0.0.2.2839
打包pdb文件


0.0.2.2836
支持分机服务期限管理与提示


0.0.2.2811
对探头的移动范围的限制减少一些


0.0.2.2807
地图上显示的报警文字行数减少一行


0.0.2.2805
修复历史记录中“导出选中行到Excel”导出了全部历史记录的bug


0.0.2.2800
高亮显示报警tab项完成


0.0.2.2784
修复当用户添加地图时在“打开文件”窗口内修改文件名后找不到文件导致死循环的bug。


0.0.2.2780
修改分机别名后立即更新分机按钮


0.0.2.2771
添加复电事件3302，0xAD


0.0.2.2770
1.原来的6秒内重复事件不处理修改为4秒
2.索要防区信息时，若无回应则每隔10秒重发一次索要


0.0.2.2765
将ui相关的callback的消息传递方式修改为buffer mode。


0.0.2.2731
恢复主机数据时,若两者不同为状态或属性时认为恢复失败,
同时为状态或属性时但状态或属性值不一致也认为恢复正确.


0.0.2.2713
启用远程控制（对主机或分机按钮右键单击）


0.0.2.2709
1.修复某些机子上不能生成二维码的bug
2.修复某些机子上不能调用python脚本的bug


0.0.2.2684
接警中心所在地到主机所在地的驾车导航完成


0.0.2.2675
百度地图功能基本完成。
主机管理界面内可查看、设置主机坐标
主机或分机界面内可查看、设置主机、分机的坐标


0.0.2.2662
1.修复防区范围错误提示（英文-->中文）
2.试图隐藏掉客户端断线重连时的断线提示：
安定宝ID相同，相同IP、端口的客户端上线时，不显示旧客户端的离线信息。
安定宝ID相同，IP、端口不同的客户端上线时，会显示旧客户端的离线信息。


0.0.2.2617
修复接警中心信息中地图界面上乱码的现象


0.0.2.2610
当发送或接收返回值不大于0时，踢出客户端链接


0.0.2.2592
1.显示的历史记录条数减少1条
2.分机添加防区时最大值为100
3.导出历史记录后清空界面上的历史记录
4.删除未绑定的防区时要求用户确认

SerialFilter更新：
稳定版


0.0.2.2573 钱方名
对任何数据包，回应的seq为发送的seq


0.0.2.2570
对有线防区特殊处理：
1.添加有线防区时不索要，直接添加
2.恢复主机数据时不恢复有线防区数据


0.0.2.2543
自动查询的超时时间为16小时


0.0.2.2534
调用Python脚本使用百度地图服务，自动定位接警中心所在地完成


0.0.2.2521
对恢复操作的回应添加详细的日志记录


0.0.2.2512
完全只靠心跳超时来判断客户端断线


0.0.2.2511
1.修复恢复直属探头时发送的类型为EE的错误
2.收到恢复的回应时，若状态或属性、物理地址与本地数据不一致，则认为这次恢复失败


0.0.2.2456
修改断线判断机制，发送失败后不认为断线


0.0.2.2412
钱工测试专用，带有远程控制功能（在主机按钮上右击）


0.0.2.2403
1.每个1小时检测一次分机上一次的通信时间，
若超过16小时无联系则自动查询

2.为方便测试，暂时每隔1分钟检测一次，超过16分钟无联系则自动查询，
待测试完成，修改为1小时与16小时


0.0.2.2379
1.服务期限检测精确度为1分钟
2.创建主机时默认服务期限为1年后
3.创建主机时若安定宝ID、设备ID非法则不允许创建


0.0.2.2365
添加主机的服务期限管理功能，到期后，
打开该主机界面时每隔1分钟提示1次该主机服务期限已到。


0.0.2.2345
1.心跳超时时间为1分钟
2.检测客户端断开连接，仅使用心跳超时机制


0.0.2.2343
1.踢掉客户端时记录原因
2.优化客户端链接对象的引用锁(TryLock)


0.0.2.2318
修复删除主机后需切换多次才能再次删除主机的bug


0.0.2.2316
添加dump内存数据的功能


0.0.2.2303
安定宝协议中GG值对0xCC做处理


0.0.2.2299
主机界面与分机界面也可以显示与其相关的历史记录


0.0.2.2293
开放索要功能


0.0.2.2290
恢复主机数据，收到回应才认为恢复成功，模拟测试完成


0.0.2.2287
恢复主机数据，发送成功即认为恢复成功，模拟测试完成


0.0.2.2262:
1.更改地图别名后立即刷新
2.分机查询失败后设置断线
3.修复历史记录判断何时弹窗提示的算法bug


0.0.2.2247：
1.查询分机失败后更改分机图标为断线
2.查询所有分机时，若某个分机查询失败则继续查询下一个


0.0.2.2236:
暂时屏蔽“索要”功能


0.0.2.2223:
1.定义主机类型
typedef enum MachineType {
	MT_UNKNOWN = 0, // 未知类型
	MT_WIFI,		// wifi主机
	MT_NETMOD,		// 带网络模块的工程主机
	MT_GPRS,		// gprs主机
	MT_MAX,
}MachineType;

2.网络模块上线报告自己为网络模块（1707），以便接警中心启用备用按钮

3.其他类型的主机暂时不需要上报自己的主机类型

4.协议更改。标准协议的xdata段添加2个字节表示长度，详见《标准协议扩展》

5.禁止添加防区000

6.修复退出编辑后不显示蚂蚁线的bug

7.修复删除地图后崩溃的bug

8.“关于”对话框显示“本次更新”

9.主界面与主机界面中历史记录的更新采用callback + buff + timer的模式，消除死锁隐患

注：以下更新仅针对MT_NETMOD 带网络模块的工程主机

1.添加防区时向工程主机索要防区信息，并根据返回的防区类型（分机、探头、未登记）自动创建防区信息

2.索要或查询防区信息时，保存防区信息（属性或状态、物理地址等）到数据库

3.查询分机时，60秒内如无回应，则每隔20秒重发一次查询。60秒后仍无回应则提示“查询失败”

4.查询所有分机功能完成。依次查询每个分机，查询每个分机的逻辑与查询分机相同（60秒）
